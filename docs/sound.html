<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>OTS Bioacoustic Analysis in R 2023 - Sound</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">OTS Bioacoustic Analysis in R 2023</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./program.html">
 <span class="menu-text">Program</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="./introduction.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./r_basics.html">
 <span class="dropdown-text">R basics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sound.html">
 <span class="dropdown-text">Sound</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./spectrograms.html">
 <span class="dropdown-text">Spectrograms</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./seewave.html">
 <span class="dropdown-text">seewave</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./annotations.html">
 <span class="dropdown-text">Annotations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ohun.html">
 <span class="dropdown-text">ohun: automatic detection</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./intro_to_warbler.html">
 <span class="dropdown-text">Intro to warbleR</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./measure_acoustic_structure.html">
 <span class="dropdown-text">Measure acoustic structure</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./comparing_methods.html">
 <span class="dropdown-text">Comparing measuring methods</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./quality_checks.html">
 <span class="dropdown-text">Quality checks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./measure_structure_green_hermit.html">
 <span class="dropdown-text">Measure structure on XC recordings</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-colab-notebooks" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Colab notebooks</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-colab-notebooks">    
        <li>
    <a class="dropdown-item" href="./general_redirect.html">
 <span class="dropdown-text">General</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./dynaspec_redirect.html">
 <span class="dropdown-text">dynaSpec</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ohun_redirect.html">
 <span class="dropdown-text">ohun</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./course_prep.html">
 <span class="menu-text">Course prep</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./code_redirect.html">
 <span class="menu-text">Code sharing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./instructor.html">
 <span class="menu-text">Instructor</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/maRce10/OTS_BIR_2023/"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#sound-in-r" id="toc-sound-in-r" class="nav-link active" data-scroll-target="#sound-in-r"><span class="toc-section-number">1</span>  Sound in R</a>
  <ul class="collapse">
  <li><a href="#non-specific-classes" id="toc-non-specific-classes" class="nav-link" data-scroll-target="#non-specific-classes"><span class="toc-section-number">1.1</span>  Non-specific classes</a></li>
  <li><a href="#dedicated-r-classes-for-sound" id="toc-dedicated-r-classes-for-sound" class="nav-link" data-scroll-target="#dedicated-r-classes-for-sound"><span class="toc-section-number">1.2</span>  Dedicated R classes for sound</a></li>
  <li><a href="#class-sound-phontools" id="toc-class-sound-phontools" class="nav-link" data-scroll-target="#class-sound-phontools"><span class="toc-section-number">1.3</span>  Class <code>sound</code> (<strong>phonTools</strong>)</a></li>
  <li><a href="#class-audiosample-audio" id="toc-class-audiosample-audio" class="nav-link" data-scroll-target="#class-audiosample-audio"><span class="toc-section-number">1.4</span>  Class <code>audioSample</code> (<strong>audio</strong>)</a></li>
  <li><a href="#export-sounds-from-r" id="toc-export-sounds-from-r" class="nav-link" data-scroll-target="#export-sounds-from-r"><span class="toc-section-number">1.5</span>  Export sounds from R</a></li>
  <li><a href="#format-.wav" id="toc-format-.wav" class="nav-link" data-scroll-target="#format-.wav"><span class="toc-section-number">1.6</span>  Format ‘.wav’</a></li>
  <li><a href="#format-.flac" id="toc-format-.flac" class="nav-link" data-scroll-target="#format-.flac"><span class="toc-section-number">1.7</span>  Format ‘.flac’</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="toc-section-number">1.8</span>  References</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><font size="7"><b>Sound</b></font></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>&nbsp;</p>
<section id="objetives" class="level2 unnumbered unlisted alert alert-info">
<h2 class="unnumbered unlisted anchored" data-anchor-id="objetives"><strong>Objetives</strong></h2>
<ul>
<li><p>Learn the basic aspects of sound as a physical phenomenom</p></li>
<li><p>Get familiar with how sound is represented as a digital object in R</p></li>
</ul>
</section>
<p>&nbsp;</p>
<div class="cell">

</div>
<p>&nbsp;</p>
<p>Sound waves are characterized by compression and expansion of the medium as sound energy moves through it. There is also back and forth motion of the particles making up the medium:</p>
<p><img src="images/wave_white_bg.gif" alt="wave animation" width="700"></p>
<p><font size="3"> taken from https://dosits.org</font></p>
<p>&nbsp;</p>
<p>The variation in pressure that is perceived at a fixed point in space can be represented by a graph of pressure (amplitude) by time:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/amplitude.gif" alt="wave and oscillogram" width="600" height="350" class="figure-img"></p>
<p></p><figcaption class="figure-caption">wave and oscillogram</figcaption><p></p>
</figure>
</div>
<p>&nbsp;</p>
<p>Sounds waves are typically quantified by their frequency (number of cycles per second, Hz) and amplitude (relative intensity).</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" style="width:85.0%"></p>
</div>
</div>
<p>&nbsp;</p>
<div class="alert alert-success">
<p><font size="6"><b>Digitizing sound</b></font></p>
<p>&nbsp;</p>
<section id="sampling-frequency" class="level2" data-number="0.1">
<h2 data-number="0.1" class="anchored" data-anchor-id="sampling-frequency"><span class="header-section-number">0.1</span> Sampling frequency</h2>
<p>Digitizing implies discretizing, which requires some sort of regular sampling. Sampling frequency refers to how many samples of the pressure level of the environment are taken per second. A 440 Hz sine wave recorded at 44100 Hz would have around 100 samples per cycle. This plot shows 2 cycles of a 440 Hz sine wave sampled (vertical dotted lines) at 44100 Hz:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</section>
<section id="nyquist-frequency" class="level2" data-number="0.2">
<h2 data-number="0.2" class="anchored" data-anchor-id="nyquist-frequency"><span class="header-section-number">0.2</span> Nyquist frequency</h2>
<p>Sampling should be good enough so the regularity of the sine wave can be reconstructed from the sampled data. Low sampling frequencies of a high frequency sine wave might not be able to provide enough information. For instance, the same 440 Hz sine wave sampled at 22050 Hz looks like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>&nbsp;</p>
<p>As you can see way less samples are taken per unit of time. The threshold at which samples cannot provide a reliable estimate of the regularity of a sine wave is called <strong>Nyquist frequency</strong> and corresponds to half of the frequency of the sine wave. This is how the 2 cycles of the 440 Hz would look like when sampled at its Nyquist frequency (sampling frequency of 880 Hz):</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>&nbsp;</p>
</section>
<section id="quantization" class="level2" data-number="0.3">
<h2 data-number="0.3" class="anchored" data-anchor-id="quantization"><span class="header-section-number">0.3</span> Quantization</h2>
<p>Once we know at which point amplitude samples will be taken we just need to measure it. This process is called <strong>quantization</strong>. The range of amplitude values is discretized in a number of intervals equals to <code>2 ^ bits</code>. Hence, it involves some rounding of the actual amplitude values and some data loss. This is the same 440 Hz sine wave recorded at 44100 kHz quantized at 2 bits (2^2 = 4 intervals):</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>&nbsp;</p>
<p>Rounding and data loss is more obvious if we bind the sampled points with lines:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>&nbsp;</p>
<p>This is the same signal quantized at 3 bits (2^3 = 8 intervals):</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>&nbsp;</p>
<p>4 bits (2^4 = 16 intervals):</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>&nbsp;</p>
<p>.. and 8 bits (2^8 = 256 intervals):</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>&nbsp;</p>
<p>At this point quantization involves very little information loss. 16 bits is probably the most common dynamic range used nowadays. As you can imagine, the high number of intervals (2^16 = 65536) allows for great precision in the quantization of amplitude.</p>
</section>
</div>
<p>&nbsp;</p>
<section id="sound-in-r" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Sound in R</h1>
<p>Sound waves can be represented by 3 kinds of R objects:</p>
<ul>
<li>Common classes (numerical vector, numerical matrix)</li>
<li>Time series classes (ts, mts)</li>
<li>Specific sound classes (Wave, sound and audioSample)</li>
</ul>
<p>&nbsp;</p>
<section id="non-specific-classes" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="non-specific-classes"><span class="header-section-number">1.1</span> Non-specific classes</h2>
<section id="vectors" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="vectors"><span class="header-section-number">1.1.1</span> Vectors</h3>
<p>Any numerical vector can be treated as a sound if a sampling frequency is provided. For example, a 440 Hz sinusoidal sound sampled at 8000 Hz for one second can be generated like this:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(seewave)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create sinewave at 440 Hz</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>s1 <span class="ot">&lt;-</span> <span class="fu">sin</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> <span class="dv">440</span> <span class="sc">*</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">8000</span>))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">is.vector</span>(s1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(s1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>These sequences of values only make sense when specifying the sampling rate at which they were created:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s1, <span class="at">f =</span> <span class="dv">8000</span>, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>&nbsp;</p>
</section>
<section id="matrices" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="matrices"><span class="header-section-number">1.1.2</span> Matrices</h3>
<p>You can read any single column matrix:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(s1)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(s2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(s2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8000    1</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s2, <span class="at">f =</span> <span class="dv">8000</span>, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>&nbsp;</p>
<p>If the matrix has more than one column, only the first column will be considered:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">8000</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(s2, x)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(s3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(s3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8000    2</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s3, <span class="at">f =</span> <span class="dv">8000</span>, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>&nbsp;</p>
</section>
<section id="time-series" class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="time-series"><span class="header-section-number">1.1.3</span> Time series</h3>
<p>The class <code>ts</code> and related functions <code>ts()</code>, <code>as.ts()</code>, <code>is.ts()</code> can also be used to generate sound objects in R. Here the command to similarly generate a series of time is shown corresponding to a 440 Hz sinusoidal sound sampled at 8000 Hz for one second:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>s4 <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> s1, <span class="at">start =</span> <span class="dv">0</span>, <span class="at">frequency =</span> <span class="dv">8000</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> Time-Series [1:8000] from 0 to 1: 0 0.339 0.637 0.861 0.982 ...</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>To generate a random noise of 0.5 seconds:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>s4 <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> <span class="fu">runif</span>(<span class="dv">4000</span>, <span class="at">min =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">max =</span> <span class="dv">1</span>), <span class="at">start =</span> <span class="dv">0</span>, <span class="at">end =</span> <span class="fl">0.5</span>, <span class="at">frequency =</span> <span class="dv">8000</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> Time-Series [1:4001] from 0 to 0.5: 0.182 0.9231 -0.5833 0.0771 -0.0794 ...</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>The <code>frequency()</code> and <code>deltat()</code> functions return the sampling frequency (<span class="math inline">\(f\)</span>) and the time resolution (<span class="math inline">\(Delta t\)</span>) respectively:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">frequency</span>(s4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8000</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">deltat</span>(s4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.000125</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>As the frequency is incorporated into the <code>ts</code> objects, it is not necessary to specify it when used within functions dedicated to audio:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s4, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>&nbsp;</p>
<p>In the case of multiple time series, <strong>seewave</strong> functions will consider only the first series:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>s5 <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> s3, <span class="at">f =</span> <span class="dv">8000</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(s5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "mts"    "ts"     "matrix"</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s5, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="dedicated-r-classes-for-sound" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="dedicated-r-classes-for-sound"><span class="header-section-number">1.2</span> Dedicated R classes for sound</h2>
<p>There are 3 kinds of objects corresponding to the <code>wav</code> binary format or the<code>mp3</code> compressed format:</p>
<ul>
<li><code>Wave</code> class of the package <strong>tuneR</strong></li>
<li><code>sound</code> class of the package <strong>phonTools</strong></li>
<li><code>AudioSample</code> class of the package <strong>audio</strong></li>
</ul>
<p>&nbsp;</p>
<section id="wave-class-tuner" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="wave-class-tuner"><span class="header-section-number">1.2.1</span> <code>Wave</code> class (<strong>tuneR</strong>)</h3>
<p>The <code>Wave</code> class comes with the <strong>tuneR</strong> package. This S4 class includes different “slots” with the amplitude data (left or right channel), the sampling frequency (or frequency), the number of bits (8/16/24/32) and the type of sound (mono/stereo). High sampling rates (&gt; 44100 Hz) can be read on these types of objects.</p>
<p>The function to import <code>.wav</code> files from the hard drive is <code>readWave</code>:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tuneR)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>s6 <span class="ot">&lt;-</span> <span class="fu">readWave</span>(<span class="st">"./examples/Phae.long1.wav"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>We can verify the class of the object like this:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># object class</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(s6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wave"
attr(,"package")
[1] "tuneR"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>S4 objects have a structure similar to lists but use ‘@’ to access each position (slot):</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># structure</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Formal class 'Wave' [package "tuneR"] with 6 slots
  ..@ left     : int [1:56251] 162 -869 833 626 103 -2 43 19 47 227 ...
  ..@ right    : num(0) 
  ..@ stereo   : logi FALSE
  ..@ samp.rate: int 22500
  ..@ bit      : int 16
  ..@ pcm      : logi TRUE</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract 1 position</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>s6<span class="sc">@</span>samp.rate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22500</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="alert alert-warning">
<p>“Pulse-code modulation (PCM) is a method used to digitally represent sampled analog signals. It is the standard form of digital audio. In a PCM stream, the amplitude of the analog signal is sampled regularly at uniform intervals, and each sample is quantized to the nearest value within a range of digital steps” (<a href="https://en.wikipedia.org/wiki/Pulse-code_modulation">Wikipedia</a>).</p>
</div>
<p>&nbsp;</p>
<p>The samples come in the slot ‘<span class="citation" data-cites="left">@left</span>’:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># samples</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>s6<span class="sc">@</span>left[<span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  162 -869  833  626  103   -2   43   19   47  227   -4  205  564  171  457
[16]  838 -216   60   76 -623 -213  168 -746 -248  175 -512  -58  651  -85 -213
[31]  586   40 -407  371  -51 -587  -92   94 -527   40</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>The number of samples is given by the duration and the sampling rate.</p>
<p>&nbsp;</p>
<div class="alert alert-info">
<p><font size="5">Exercise</font></p>
<ul>
<li>How can we calculate the duration of the <code>wave</code> object using the information in the object?</li>
</ul>
<p>&nbsp;</p>
<ul>
<li>Extract the first second of audio from the object <code>s6</code> using indexing (and squared brackets)</li>
</ul>
</div>
<p>&nbsp;</p>
<p>An advantage of using <code>readWave()</code> is the ability to read specific segments of sound files, especially useful with long files. This is done using the <code>from</code> and<code>to</code> arguments and specifying the units of time with the <code>units</code> arguments. The units can be converted into “samples”, “minutes” or “hours”. For example, to read only the section that begins in 1s and ends in 2s of the file “Phae.long1.wav”:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>s7 <span class="ot">&lt;-</span> <span class="fu">readWave</span>(<span class="st">"./examples/Phae.long1.wav"</span>, <span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">2</span>, <span class="at">units =</span> <span class="st">"seconds"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>s7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Wave Object
    Number of Samples:      22500
    Duration (seconds):     1
    Samplingrate (Hertz):   22500
    Channels (Mono/Stereo): Mono
    PCM (integer format):   TRUE
    Bit (8/16/24/32/64):    16 </code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>The <code>.mp3</code> files can be imported to R although they are imported in<code>Wave</code> format. This is done using the <code>readMP3()</code> function:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>s7 <span class="ot">&lt;-</span> <span class="fu">readMP3</span>(<span class="st">"./examples/Phae.long1.mp3"</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>s7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Wave Object
    Number of Samples:      56448
    Duration (seconds):     2.56
    Samplingrate (Hertz):   22050
    Channels (Mono/Stereo): Mono
    PCM (integer format):   TRUE
    Bit (8/16/24/32/64):    16 </code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>To obtain information about the object (sampling frequency, number of bits, mono/stereo), it is necessary to use the indexing of S4 class objects:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>s7<span class="sc">@</span>samp.rate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22050</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>s7<span class="sc">@</span>bit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>s7<span class="sc">@</span>stereo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>A property that does not appear in these calls is that <code>readWave</code> does not normalize the sound. The values that describe the sound will be included between <span class="math inline">\(\pm2^{bit} - 1\)</span>:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(s7<span class="sc">@</span>left)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -32768  32767</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="alert alert-info">
<p><font size="5">Exercise</font></p>
<p>The function <code>Wave</code> can be used to create wave objects.</p>
<p>&nbsp;</p>
<ul>
<li><p>Run the example code in the function documentation</p></li>
<li><p>Plot the oscillogram for the first 0.01 s of ‘Wobj’</p></li>
<li><p>Note that the function <code>sine</code> provides a shortcut that can be used to create wave object with a sine wave. Check out other similar functions described in the <code>sine</code> function documentation. Try 4 of these alternative functions and plot the oscillogram of the first 0.01 s for each of them.</p></li>
</ul>
</div>
<p>&nbsp;</p>
<p>The function <code>read_sound_files</code> from warbleR is a wrapper over several sound file reading functions, that can read files in ‘wav’, ‘mp3’, ‘flac’ and ‘wac’ format:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(warbleR)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># wave</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>rsf1 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"Phaethornis-eurynome-15607.wav"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wave"
attr(,"package")
[1] "tuneR"</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mp3</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>rsf2 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"Phaethornis-striigularis-154074.mp3"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wave"
attr(,"package")
[1] "tuneR"</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># flac</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>rsf3 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"Phae.long1.flac"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wave"
attr(,"package")
[1] "tuneR"</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># wac</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>rsf4 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"recording_20170716_230503.wac"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wave"
attr(,"package")
[1] "tuneR"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>The function can also read recordings hosted in an online repository:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>rsf5 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="at">X =</span> <span class="st">"https://xeno-canto.org/35340/download"</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wave"
attr(,"package")
[1] "tuneR"</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>rsf6 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="at">X =</span> <span class="st">"https://github.com/maRce10/OTS_BIR_2023/raw/master/examples/Phae.long1.flac"</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wave"
attr(,"package")
[1] "tuneR"</code></pre>
</div>
</div>
<p>&nbsp;</p>
</section>
</section>
<section id="class-sound-phontools" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="class-sound-phontools"><span class="header-section-number">1.3</span> Class <code>sound</code> (<strong>phonTools</strong>)</h2>
<p>The <code>loadsound()</code> function of <em>phonTools</em> also imports ‘wave’ sound files into R, in this case as objects of class <code>sound</code>:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(phonTools)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>s8 <span class="ot">&lt;-</span> <span class="fu">loadsound</span>(<span class="st">"./examples/Phae.long1.wav"</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>s8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
      Sound Object

   Read from file:         ./examples/Phae.long1.wav
   Sampling frequency:     22500  Hz
   Duration:               2500.044  ms
   Number of Samples:      56251 </code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ filename  : chr "./examples/Phae.long1.wav"
 $ fs        : int 22500
 $ numSamples: num 56251
 $ duration  : num 2500
 $ sound     : Time-Series [1:56251] from 0 to 2.5: 0.00494 -0.02652 0.02542 0.0191 0.00314 ...
 - attr(*, "class")= chr "sound"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>This function only imports files with a dynamic range of 8 or 16 bits.</p>
<p>&nbsp;</p>
</section>
<section id="class-audiosample-audio" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="class-audiosample-audio"><span class="header-section-number">1.4</span> Class <code>audioSample</code> (<strong>audio</strong>)</h2>
<p>The <strong>audio</strong> package is another option to handle <code>.wav</code> files. The sound can be imported using the <code>load.wave()</code> function. The class of the resulting object is <code>audioSample</code> which is essentially a numerical vector (for mono) or a numerical matrix with two rows (for stereo). The sampling frequency and resolution are saved as attributes:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(audio)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>s10 <span class="ot">&lt;-</span> <span class="fu">load.wave</span>(<span class="st">"./examples/Phae.long1.wav"</span>)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(s10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>sample rate: 22500Hz, mono, 16-bits
[1]  4.943848e-03 -2.652058e-02  2.542114e-02  1.910400e-02  3.143311e-03
[6] -6.103702e-05</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>s10<span class="sc">$</span>rate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22500</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>s10<span class="sc">$</span>bits</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>The main advantage of the <strong>audio</strong> package is that the sound can be acquired directly within an R session. This is achieved first by preparing a <code>NAs</code> vector and then using the<code>record()</code> function. For example, to obtain a mono sound of 5 seconds sampled at 16 kHz:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>s11 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA_real_</span>, <span class="dv">16000</span> <span class="sc">*</span> <span class="dv">5</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="fu">record</span>(s11, <span class="dv">16000</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>A recording session can be controlled by three complementary functions: <code>pause()</code>, <code>rewind()</code>, and <code>resume()</code>.</p>
<p>&nbsp;</p>
</section>
<section id="export-sounds-from-r" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="export-sounds-from-r"><span class="header-section-number">1.5</span> Export sounds from R</h2>
<p>For maximum compatibility with other sound programs, it may be useful to save a sound as a simple <code>.txt</code> file. The following commands will write a “tico.txt” file:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(tico)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(tico, <span class="at">f =</span> <span class="dv">22050</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
</section>
<section id="format-.wav" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="format-.wav"><span class="header-section-number">1.6</span> Format ‘.wav’</h2>
<p><strong>tuneR</strong> and <strong>audio</strong> have a function to write <code>.wav</code> files: <code>writeWave()</code> and <code>save.wave()</code> respectively. Within <strong>seewave</strong>, the <code>savewav()</code> function, which is based on <code>writeWave()</code>, can be used to save data in <code>.wav</code> format. By default, the object name will be used for the name of the <code>.wav</code> file:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">savewav</span>(tico)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
</section>
<section id="format-.flac" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="format-.flac"><span class="header-section-number">1.7</span> Format ‘.flac’</h2>
<p>Free Lossless Audio Codec (FLAC) is a file format for lossless audio data compression. FLAC reduces bandwidth and storage requirements without sacrificing the integrity of the audio source. Audio sources encoded in FLAC are generally reduced in size from 40 to 50 percent. See the flac website for more details (<a href="http://flac.sourceforge.net">flac.sourceforge.net</a>).</p>
<p>The <code>.flac</code> format cannot be used as such with R. However, the <code>wav2flac()</code>function allows you to call the FLAC software directly from the console. Therefore, FLAC must be installed on your operating system. If you have a <code>.wav</code> file that you want to compress in <code>.flac</code>, call:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wav2flac</span>(<span class="at">file =</span> <span class="st">"./examples/Phae.long1.wav"</span>, <span class="at">overwrite =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>To compress a <code>.wav</code> file to a <code>.flac</code> format, the argument <code>reverse = TRUE</code> must be used:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wav2flac</span>(<span class="st">"Phae.long1.flac"</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>This table, taken from Sueur (2018), summarizes the functions available to import and export sound files in R. The table is incomplete since it does not mention the functions of the <code>phonTools</code> package:</p>
<p><img src="images/tabla-waves.png" alt="tabla imp exp waves" width="700"></p>
<hr>
<p>&nbsp;</p>
<div class="alert alert-info">
<p><font size="5">Exercise</font></p>
<ul>
<li><p>How does the sampling rate affect the size of an audio file? (hint: create 2 sounds files with the same data but different sampling rates; use <code>sine()</code>)</p></li>
<li><p>How does the dynamic range affect the size of an audio file?</p></li>
<li><p>Use the <code>system.time()</code> function to compare the performance of the different functions to import audio files in R. For this use the file “LBH.374.SUR.wav” (Long-billed hermit songs) which lasts about 2 min</p></li>
</ul>
<p>The following code creates a plot similar to <code>oscillo</code> but using dots instead of lines:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>wav <span class="ot">&lt;-</span> <span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">500</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(wav<span class="sc">@</span>left)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="sound_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>&nbsp;</p>
<ul>
<li>Use the function <code>downsample()</code> to reduce the sampling rate of ‘wav’ (below 44100) and plot the output object. Decrease the sampling rate until you cannot recognize the wave pattern from the original wave object. Try several values so you get a sense at which sampling rate this happens.</li>
</ul>
<div class="cell">

</div>
</div>
<p>&nbsp;</p>
<hr>
</section>
<section id="references" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="references"><span class="header-section-number">1.8</span> References</h2>
<ol type="1">
<li><p>Sueur J, Aubin T, Simonis C. 2008. Equipment review: seewave, a free modular tool for sound analysis and synthesis. Bioacoustics 18(2):213–226.</p></li>
<li><p>Sueur, J. (2018). Sound Analysis and Synthesis with R.</p></li>
<li><p>Sueur J. (2018). I/O of sound with R. seewave package vignette. url: https://cran.r-project.org/web/packages/seewave/vignettes/seewave_IO.pdf</p></li>
</ol>
<hr>
<p><font size="4">Session information</font></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.2 Patched (2022-11-10 r83330)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 20.04.5 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0

locale:
 [1] LC_CTYPE=es_ES.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=es_CR.UTF-8        LC_COLLATE=es_ES.UTF-8    
 [5] LC_MONETARY=es_CR.UTF-8    LC_MESSAGES=es_ES.UTF-8   
 [7] LC_PAPER=es_CR.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=es_CR.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] audio_0.1-10       phonTools_0.2-2.1  warbleR_1.1.28     NatureSounds_1.0.4
[5] tuneR_1.4.4        knitr_1.42         seewave_2.2.0     

loaded via a namespace (and not attached):
 [1] tidyselect_1.2.0   xfun_0.39          pbapply_1.7-0      colorspace_2.1-0  
 [5] vctrs_0.6.2        generics_0.1.3     testthat_3.1.8     htmltools_0.5.5   
 [9] viridisLite_0.4.2  yaml_2.3.7         utf8_1.2.3         rlang_1.1.1       
[13] pillar_1.9.0       glue_1.6.2         withr_2.5.0        lifecycle_1.0.3   
[17] stringr_1.5.0      munsell_0.5.0      gtable_0.3.3       moments_0.14.1    
[21] htmlwidgets_1.5.4  evaluate_0.21      fastmap_1.1.1      fftw_1.0-7        
[25] parallel_4.2.2     fansi_1.0.4        Rcpp_1.0.10        scales_1.2.1      
[29] formatR_1.12       jsonlite_1.8.4     brio_1.1.3         gridExtra_2.3     
[33] rjson_0.2.21       ggplot2_3.4.2      digest_0.6.31      stringi_1.7.12    
[37] dplyr_1.1.0        bioacoustics_0.2.8 dtw_1.23-1         grid_4.2.2        
[41] cli_3.6.1          tools_4.2.2        bitops_1.0-7       magrittr_2.0.3    
[45] RCurl_1.98-1.12    proxy_0.4-27       tibble_3.2.1       pkgconfig_2.0.3   
[49] MASS_7.3-58.2      rmarkdown_2.21     rstudioapi_0.14    viridis_0.6.3     
[53] R6_2.5.1           signal_0.7-7       compiler_4.2.2    </code></pre>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/https:\/\/marce10\.github\.io\/OTS_BIR_2023\//);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb78" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &lt;font size="7"&gt;&lt;b&gt;Sound&lt;/b&gt;&lt;/font&gt;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="an">toc-depth:</span><span class="co"> 2</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="an">toc-location:</span><span class="co"> left</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="an">highlight-style:</span><span class="co"> pygments</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: kable</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a><span class="co">    css: styles.css</span></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="co">    link-external-icon: true</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="co">    link-external-newwindow: true  </span></span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-info}</span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Objetives** {.unnumbered .unlisted}</span></span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Learn the basic aspects of sound as a physical phenomenom</span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Get familiar with how sound is represented as a digital object in R</span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-28"><a href="#cb78-28" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-29"><a href="#cb78-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-30"><a href="#cb78-30" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE}</span></span>
<span id="cb78-31"><a href="#cb78-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-32"><a href="#cb78-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(seewave)</span>
<span id="cb78-33"><a href="#cb78-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb78-34"><a href="#cb78-34" aria-hidden="true" tabindex="-1"></a>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">tidy =</span> <span class="cn">TRUE</span>, <span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb78-35"><a href="#cb78-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-36"><a href="#cb78-36" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-37"><a href="#cb78-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-38"><a href="#cb78-38" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-39"><a href="#cb78-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-40"><a href="#cb78-40" aria-hidden="true" tabindex="-1"></a>Sound waves are characterized by compression and expansion of the medium as sound energy moves through it. There is also back and forth motion of the particles making up the medium:</span>
<span id="cb78-41"><a href="#cb78-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-42"><a href="#cb78-42" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"images/wave_white_bg.gif"</span> <span class="er">alt</span><span class="ot">=</span><span class="st">"wave animation"</span> <span class="er">width</span><span class="ot">=</span><span class="st">"700"</span><span class="kw">/&gt;</span></span>
<span id="cb78-43"><a href="#cb78-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-44"><a href="#cb78-44" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;font</span> <span class="er">size</span><span class="ot">=</span><span class="st">"3"</span><span class="kw">&gt;</span> taken from https://dosits.org<span class="kw">&lt;/font&gt;</span></span>
<span id="cb78-45"><a href="#cb78-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-46"><a href="#cb78-46" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-47"><a href="#cb78-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-48"><a href="#cb78-48" aria-hidden="true" tabindex="-1"></a>The variation in pressure that is perceived at a fixed point in space can be represented by a graph of pressure (amplitude) by time:</span>
<span id="cb78-49"><a href="#cb78-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-50"><a href="#cb78-50" aria-hidden="true" tabindex="-1"></a><span class="al">![wave and oscillogram](images/amplitude.gif)</span>{alt="wave and oscillogram" width="600" height="350"}</span>
<span id="cb78-51"><a href="#cb78-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-52"><a href="#cb78-52" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-53"><a href="#cb78-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-54"><a href="#cb78-54" aria-hidden="true" tabindex="-1"></a>Sounds waves are typically quantified by their frequency (number of cycles per second, Hz) and amplitude (relative intensity).</span>
<span id="cb78-55"><a href="#cb78-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-56"><a href="#cb78-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="85%", warning=FALSE, message=FALSE}</span></span>
<span id="cb78-57"><a href="#cb78-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-58"><a href="#cb78-58" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-59"><a href="#cb78-59" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>, <span class="fl">0.55</span>, <span class="dv">1</span>)</span>
<span id="cb78-60"><a href="#cb78-60" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.4</span>, <span class="fl">0.8</span>, <span class="dv">1</span>)</span>
<span id="cb78-61"><a href="#cb78-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-62"><a href="#cb78-62" aria-hidden="true" tabindex="-1"></a>lwd <span class="ot">&lt;-</span><span class="dv">4</span></span>
<span id="cb78-63"><a href="#cb78-63" aria-hidden="true" tabindex="-1"></a>col <span class="ot">&lt;-</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">10</span>)[<span class="dv">3</span>]</span>
<span id="cb78-64"><a href="#cb78-64" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(</span>
<span id="cb78-65"><a href="#cb78-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(x[<span class="dv">1</span>], x[<span class="dv">2</span>], y[<span class="dv">1</span>], y[<span class="dv">4</span>]), <span class="co"># 1 left amptliude panel</span></span>
<span id="cb78-66"><a href="#cb78-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(x[<span class="dv">1</span>], x[<span class="dv">4</span>], y[<span class="dv">3</span>], y[<span class="dv">4</span>]), <span class="co"># 2 upper freq panel</span></span>
<span id="cb78-67"><a href="#cb78-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(x[<span class="dv">2</span>], x[<span class="dv">3</span>], y[<span class="dv">2</span>], y[<span class="dv">3</span>]), <span class="co"># 3 left upper oscillo</span></span>
<span id="cb78-68"><a href="#cb78-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(x[<span class="dv">3</span>], x[<span class="dv">4</span>], y[<span class="dv">2</span>], y[<span class="dv">3</span>]), <span class="co"># 4 right upper oscillo</span></span>
<span id="cb78-69"><a href="#cb78-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(x[<span class="dv">2</span>], x[<span class="dv">3</span>], y[<span class="dv">1</span>], y[<span class="dv">2</span>]), <span class="co"># 5 left lower oscillo</span></span>
<span id="cb78-70"><a href="#cb78-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(x[<span class="dv">3</span>], x[<span class="dv">4</span>], y[<span class="dv">1</span>], y[<span class="dv">2</span>]) <span class="co"># 6 left upper oscillo</span></span>
<span id="cb78-71"><a href="#cb78-71" aria-hidden="true" tabindex="-1"></a>),  <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb78-72"><a href="#cb78-72" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb78-73"><a href="#cb78-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-74"><a href="#cb78-74" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">split.screen</span>(<span class="at">figs =</span> mat)</span>
<span id="cb78-75"><a href="#cb78-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-76"><a href="#cb78-76" aria-hidden="true" tabindex="-1"></a><span class="fu">screen</span>(<span class="dv">1</span>)</span>
<span id="cb78-77"><a href="#cb78-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-78"><a href="#cb78-78" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="at">bg =</span> <span class="st">"white"</span>, <span class="at">new =</span> T)</span>
<span id="cb78-79"><a href="#cb78-79" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span>, <span class="at">frame.plot =</span> <span class="cn">FALSE</span>, <span class="at">type =</span> <span class="st">"n"</span>, <span class="at">xaxt=</span><span class="st">'n'</span>, <span class="at">yaxt=</span><span class="st">'n'</span>)</span>
<span id="cb78-80"><a href="#cb78-80" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">0.8</span>, <span class="at">y =</span> <span class="fl">0.98</span>, <span class="st">"Frequency"</span>, <span class="at">srt =</span> <span class="dv">90</span>,  <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-81"><a href="#cb78-81" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">1.2</span>, <span class="at">y =</span> <span class="fl">1.2</span>, <span class="st">"High"</span>, <span class="at">srt =</span> <span class="dv">90</span>,  <span class="at">cex =</span> <span class="fl">1.2</span>)</span>
<span id="cb78-82"><a href="#cb78-82" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">1.2</span>, <span class="at">y =</span> <span class="fl">0.8</span>, <span class="st">"Low"</span>, <span class="at">srt =</span> <span class="dv">90</span>,  <span class="at">cex =</span> <span class="fl">1.2</span>)</span>
<span id="cb78-83"><a href="#cb78-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-84"><a href="#cb78-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-85"><a href="#cb78-85" aria-hidden="true" tabindex="-1"></a><span class="fu">screen</span>(<span class="dv">2</span>)</span>
<span id="cb78-86"><a href="#cb78-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-87"><a href="#cb78-87" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="at">bg =</span> <span class="st">"white"</span>, <span class="at">new =</span> T)</span>
<span id="cb78-88"><a href="#cb78-88" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span>, <span class="at">frame.plot =</span> <span class="cn">FALSE</span>, <span class="at">type =</span> <span class="st">"n"</span>, <span class="at">xaxt=</span><span class="st">'n'</span>, <span class="at">yaxt=</span><span class="st">'n'</span>)</span>
<span id="cb78-89"><a href="#cb78-89" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">1.04</span>, <span class="at">y =</span> <span class="fl">1.1</span>, <span class="st">"Amplitude"</span>,  <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-90"><a href="#cb78-90" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">0.8</span>, <span class="at">y =</span> <span class="fl">0.8</span>, <span class="st">"Low"</span>, <span class="at">cex =</span> <span class="fl">1.2</span>)</span>
<span id="cb78-91"><a href="#cb78-91" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">1.2</span>, <span class="at">y =</span> <span class="fl">0.8</span>, <span class="st">"High"</span>, <span class="at">cex =</span> <span class="fl">1.2</span>)</span>
<span id="cb78-92"><a href="#cb78-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-93"><a href="#cb78-93" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-94"><a href="#cb78-94" aria-hidden="true" tabindex="-1"></a>high.freq <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">500</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-95"><a href="#cb78-95" aria-hidden="true" tabindex="-1"></a>low.freq <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">220</span>, <span class="at">duration =</span> <span class="dv">500</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-96"><a href="#cb78-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-97"><a href="#cb78-97" aria-hidden="true" tabindex="-1"></a><span class="fu">screen</span>(<span class="dv">3</span>)</span>
<span id="cb78-98"><a href="#cb78-98" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb78-99"><a href="#cb78-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-100"><a href="#cb78-100" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb78-101"><a href="#cb78-101" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(high.freq<span class="sc">@</span>left <span class="sc">/</span> <span class="dv">2</span>, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">xaxt=</span><span class="st">'n'</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col) </span>
<span id="cb78-102"><a href="#cb78-102" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-103"><a href="#cb78-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-104"><a href="#cb78-104" aria-hidden="true" tabindex="-1"></a><span class="fu">screen</span>(<span class="dv">4</span>)</span>
<span id="cb78-105"><a href="#cb78-105" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb78-106"><a href="#cb78-106" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(high.freq<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">xaxt=</span><span class="st">'n'</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col)</span>
<span id="cb78-107"><a href="#cb78-107" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-108"><a href="#cb78-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-109"><a href="#cb78-109" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb78-110"><a href="#cb78-110" aria-hidden="true" tabindex="-1"></a><span class="fu">screen</span>(<span class="dv">5</span>)</span>
<span id="cb78-111"><a href="#cb78-111" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb78-112"><a href="#cb78-112" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(low.freq<span class="sc">@</span>left <span class="sc">/</span> <span class="dv">2</span>, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">xaxt=</span><span class="st">'n'</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col)</span>
<span id="cb78-113"><a href="#cb78-113" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-114"><a href="#cb78-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-115"><a href="#cb78-115" aria-hidden="true" tabindex="-1"></a><span class="fu">screen</span>(<span class="dv">6</span>)</span>
<span id="cb78-116"><a href="#cb78-116" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb78-117"><a href="#cb78-117" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(low.freq<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">xaxt=</span><span class="st">'n'</span>, <span class="at">ann=</span><span class="cn">FALSE</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col)</span>
<span id="cb78-118"><a href="#cb78-118" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-119"><a href="#cb78-119" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb78-120"><a href="#cb78-120" aria-hidden="true" tabindex="-1"></a><span class="fu">close.screen</span>(<span class="at">all.screens =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-121"><a href="#cb78-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-122"><a href="#cb78-122" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(opar)</span>
<span id="cb78-123"><a href="#cb78-123" aria-hidden="true" tabindex="-1"></a><span class="co"># dev.off()</span></span>
<span id="cb78-124"><a href="#cb78-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-125"><a href="#cb78-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-126"><a href="#cb78-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-127"><a href="#cb78-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-128"><a href="#cb78-128" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-129"><a href="#cb78-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-130"><a href="#cb78-130" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-success}</span>
<span id="cb78-131"><a href="#cb78-131" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;font</span> <span class="er">size</span><span class="ot">=</span><span class="st">"6"</span><span class="kw">&gt;&lt;b&gt;</span>Digitizing sound<span class="kw">&lt;/b&gt;&lt;/font&gt;</span></span>
<span id="cb78-132"><a href="#cb78-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-133"><a href="#cb78-133" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-134"><a href="#cb78-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-135"><a href="#cb78-135" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sampling frequency</span></span>
<span id="cb78-136"><a href="#cb78-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-137"><a href="#cb78-137" aria-hidden="true" tabindex="-1"></a>Digitizing implies discretizing, which requires some sort of regular sampling. Sampling frequency refers to how many samples of the pressure level of the environment are taken per second. A 440 Hz sine wave recorded at 44100 Hz would have around 100 samples per cycle. This plot shows 2 cycles of a 440 Hz sine wave sampled (vertical dotted lines) at 44100 Hz:</span>
<span id="cb78-138"><a href="#cb78-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-139"><a href="#cb78-139" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-140"><a href="#cb78-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-141"><a href="#cb78-141" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"~/Dropbox/R_package_testing/warbleR/R/read_sound_file.R"</span>)</span>
<span id="cb78-142"><a href="#cb78-142" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"~/Dropbox/R_package_testing/warbleR/R/warbleR_options.R"</span>)</span>
<span id="cb78-143"><a href="#cb78-143" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-144"><a href="#cb78-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-145"><a href="#cb78-145" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-146"><a href="#cb78-146" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-147"><a href="#cb78-147" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">200</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-148"><a href="#cb78-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-149"><a href="#cb78-149" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-150"><a href="#cb78-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-151"><a href="#cb78-151" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span><span class="dv">2</span>, <span class="at">ytop=</span><span class="dv">2</span>, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-152"><a href="#cb78-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-153"><a href="#cb78-153" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-154"><a href="#cb78-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-155"><a href="#cb78-155" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-156"><a href="#cb78-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-157"><a href="#cb78-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-158"><a href="#cb78-158" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> sn.wv<span class="sc">@</span>left[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-159"><a href="#cb78-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-160"><a href="#cb78-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-161"><a href="#cb78-161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-162"><a href="#cb78-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-163"><a href="#cb78-163" aria-hidden="true" tabindex="-1"></a><span class="fu">## Nyquist frequency</span></span>
<span id="cb78-164"><a href="#cb78-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-165"><a href="#cb78-165" aria-hidden="true" tabindex="-1"></a>Sampling should be good enough so the regularity of the sine wave can be reconstructed from the sampled data. Low sampling frequencies of a high frequency sine wave might not be able to provide enough information. For instance, the same 440 Hz sine wave sampled at 22050 Hz looks like this:</span>
<span id="cb78-166"><a href="#cb78-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-167"><a href="#cb78-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-168"><a href="#cb78-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-169"><a href="#cb78-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-170"><a href="#cb78-170" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-171"><a href="#cb78-171" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-172"><a href="#cb78-172" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">50</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">11025</span>)</span>
<span id="cb78-173"><a href="#cb78-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-174"><a href="#cb78-174" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-175"><a href="#cb78-175" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-176"><a href="#cb78-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-177"><a href="#cb78-177" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-178"><a href="#cb78-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-179"><a href="#cb78-179" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span><span class="dv">2</span>, <span class="at">ytop=</span><span class="dv">2</span>, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-180"><a href="#cb78-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-181"><a href="#cb78-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-182"><a href="#cb78-182" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> sn.wv<span class="sc">@</span>left[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-183"><a href="#cb78-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-184"><a href="#cb78-184" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-185"><a href="#cb78-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-186"><a href="#cb78-186" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-187"><a href="#cb78-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-188"><a href="#cb78-188" aria-hidden="true" tabindex="-1"></a>As you can see way less samples are taken per unit of time. The threshold at which samples cannot provide a reliable estimate of the regularity of a sine wave is called **Nyquist frequency** and corresponds to half of the frequency of the sine wave. This is how the 2 cycles of the 440 Hz would look like when sampled at its Nyquist frequency (sampling frequency of 880 Hz):</span>
<span id="cb78-189"><a href="#cb78-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-190"><a href="#cb78-190" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-191"><a href="#cb78-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-192"><a href="#cb78-192" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-193"><a href="#cb78-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-194"><a href="#cb78-194" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-195"><a href="#cb78-195" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-196"><a href="#cb78-196" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">400</span>, <span class="at">duration =</span> <span class="dv">200</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">40000</span>)</span>
<span id="cb78-197"><a href="#cb78-197" aria-hidden="true" tabindex="-1"></a>sn.wv2 <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">400</span>, <span class="at">duration =</span> <span class="dv">4</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">800</span>)</span>
<span id="cb78-198"><a href="#cb78-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-199"><a href="#cb78-199" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-200"><a href="#cb78-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-201"><a href="#cb78-201" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span><span class="dv">2</span>, <span class="at">ytop=</span><span class="dv">2</span>, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-202"><a href="#cb78-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-203"><a href="#cb78-203" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-204"><a href="#cb78-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-205"><a href="#cb78-205" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv2), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv2)), <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-206"><a href="#cb78-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-207"><a href="#cb78-207" aria-hidden="true" tabindex="-1"></a>sq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv2))</span>
<span id="cb78-208"><a href="#cb78-208" aria-hidden="true" tabindex="-1"></a>sq <span class="ot">&lt;-</span> sq <span class="sc">/</span> <span class="fu">max</span>(sq)</span>
<span id="cb78-209"><a href="#cb78-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-210"><a href="#cb78-210" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> sn.wv<span class="sc">@</span>left[<span class="fu">round</span>(sq <span class="sc">*</span> <span class="fu">length</span>(sn.wv<span class="sc">@</span>left))<span class="sc">+</span> <span class="dv">1</span>], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv2), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv2)), <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-211"><a href="#cb78-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-212"><a href="#cb78-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-213"><a href="#cb78-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-214"><a href="#cb78-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-215"><a href="#cb78-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-216"><a href="#cb78-216" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-217"><a href="#cb78-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-218"><a href="#cb78-218" aria-hidden="true" tabindex="-1"></a><span class="fu">## Quantization</span></span>
<span id="cb78-219"><a href="#cb78-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-220"><a href="#cb78-220" aria-hidden="true" tabindex="-1"></a>Once we know at which point amplitude samples will be taken we just need to measure it. This process is called **quantization**. The range of amplitude values is discretized in a number of intervals equals to <span class="in">`2 ^ bits`</span>. Hence, it involves some rounding of the actual amplitude values and some data loss. This is the same 440 Hz sine wave recorded at 44100 kHz quantized at 2 bits (2\^2 = 4 intervals):</span>
<span id="cb78-221"><a href="#cb78-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-222"><a href="#cb78-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-223"><a href="#cb78-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-224"><a href="#cb78-224" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-225"><a href="#cb78-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-226"><a href="#cb78-226" aria-hidden="true" tabindex="-1"></a>intervals <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb78-227"><a href="#cb78-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-228"><a href="#cb78-228" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-229"><a href="#cb78-229" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-230"><a href="#cb78-230" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">200</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-231"><a href="#cb78-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-232"><a href="#cb78-232" aria-hidden="true" tabindex="-1"></a>sn.wv<span class="sc">@</span>left <span class="ot">&lt;-</span> sn.wv<span class="sc">@</span>left <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb78-233"><a href="#cb78-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-234"><a href="#cb78-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-235"><a href="#cb78-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-236"><a href="#cb78-236" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals ) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-237"><a href="#cb78-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-238"><a href="#cb78-238" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span>intervals, <span class="at">ytop=</span> intervals, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-239"><a href="#cb78-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-240"><a href="#cb78-240" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-241"><a href="#cb78-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-242"><a href="#cb78-242" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-243"><a href="#cb78-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-244"><a href="#cb78-244" aria-hidden="true" tabindex="-1"></a>quant <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">cut</span>(sn.wv<span class="sc">@</span>left, <span class="at">breaks =</span> intervals)) <span class="sc">-</span> (<span class="dv">1</span>  <span class="sc">+</span> (intervals <span class="sc">/</span> <span class="dv">2</span>))</span>
<span id="cb78-245"><a href="#cb78-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-246"><a href="#cb78-246" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">unique</span>(quant), <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-247"><a href="#cb78-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-248"><a href="#cb78-248" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> quant[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-249"><a href="#cb78-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-250"><a href="#cb78-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-251"><a href="#cb78-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-252"><a href="#cb78-252" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-253"><a href="#cb78-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-254"><a href="#cb78-254" aria-hidden="true" tabindex="-1"></a>Rounding and data loss is more obvious if we bind the sampled points with lines:</span>
<span id="cb78-255"><a href="#cb78-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-256"><a href="#cb78-256" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-257"><a href="#cb78-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-258"><a href="#cb78-258" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-259"><a href="#cb78-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-260"><a href="#cb78-260" aria-hidden="true" tabindex="-1"></a>intervals <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb78-261"><a href="#cb78-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-262"><a href="#cb78-262" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-263"><a href="#cb78-263" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-264"><a href="#cb78-264" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">200</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-265"><a href="#cb78-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-266"><a href="#cb78-266" aria-hidden="true" tabindex="-1"></a>sn.wv<span class="sc">@</span>left <span class="ot">&lt;-</span> sn.wv<span class="sc">@</span>left <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb78-267"><a href="#cb78-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-268"><a href="#cb78-268" aria-hidden="true" tabindex="-1"></a>quant <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">cut</span>(sn.wv<span class="sc">@</span>left, <span class="at">breaks =</span> intervals)) <span class="sc">-</span> (<span class="dv">1</span>  <span class="sc">+</span> (intervals <span class="sc">/</span> <span class="dv">2</span>))</span>
<span id="cb78-269"><a href="#cb78-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-270"><a href="#cb78-270" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals ) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-271"><a href="#cb78-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-272"><a href="#cb78-272" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> quant, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-273"><a href="#cb78-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-274"><a href="#cb78-274" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span>intervals, <span class="at">ytop=</span> intervals, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-275"><a href="#cb78-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-276"><a href="#cb78-276" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-277"><a href="#cb78-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-278"><a href="#cb78-278" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-279"><a href="#cb78-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-280"><a href="#cb78-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-281"><a href="#cb78-281" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">unique</span>(quant), <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-282"><a href="#cb78-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-283"><a href="#cb78-283" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> quant[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-284"><a href="#cb78-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-285"><a href="#cb78-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-286"><a href="#cb78-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-287"><a href="#cb78-287" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-288"><a href="#cb78-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-289"><a href="#cb78-289" aria-hidden="true" tabindex="-1"></a>This is the same signal quantized at 3 bits (2\^3 = 8 intervals):</span>
<span id="cb78-290"><a href="#cb78-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-291"><a href="#cb78-291" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-292"><a href="#cb78-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-293"><a href="#cb78-293" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-294"><a href="#cb78-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-295"><a href="#cb78-295" aria-hidden="true" tabindex="-1"></a>intervals <span class="ot">&lt;-</span> <span class="dv">8</span></span>
<span id="cb78-296"><a href="#cb78-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-297"><a href="#cb78-297" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-298"><a href="#cb78-298" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-299"><a href="#cb78-299" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">200</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-300"><a href="#cb78-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-301"><a href="#cb78-301" aria-hidden="true" tabindex="-1"></a>sn.wv<span class="sc">@</span>left <span class="ot">&lt;-</span> sn.wv<span class="sc">@</span>left <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb78-302"><a href="#cb78-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-303"><a href="#cb78-303" aria-hidden="true" tabindex="-1"></a>quant <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">cut</span>(sn.wv<span class="sc">@</span>left, <span class="at">breaks =</span> intervals)) <span class="sc">-</span> (<span class="dv">1</span>  <span class="sc">+</span> (intervals <span class="sc">/</span> <span class="dv">2</span>))</span>
<span id="cb78-304"><a href="#cb78-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-305"><a href="#cb78-305" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals ) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-306"><a href="#cb78-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-307"><a href="#cb78-307" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> quant, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-308"><a href="#cb78-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-309"><a href="#cb78-309" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span>intervals, <span class="at">ytop=</span> intervals, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-310"><a href="#cb78-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-311"><a href="#cb78-311" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-312"><a href="#cb78-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-313"><a href="#cb78-313" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-314"><a href="#cb78-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-315"><a href="#cb78-315" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">unique</span>(quant), <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-316"><a href="#cb78-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-317"><a href="#cb78-317" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> quant[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-318"><a href="#cb78-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-319"><a href="#cb78-319" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-320"><a href="#cb78-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-321"><a href="#cb78-321" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-322"><a href="#cb78-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-323"><a href="#cb78-323" aria-hidden="true" tabindex="-1"></a>4 bits (2\^4 = 16 intervals):</span>
<span id="cb78-324"><a href="#cb78-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-325"><a href="#cb78-325" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-326"><a href="#cb78-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-327"><a href="#cb78-327" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-328"><a href="#cb78-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-329"><a href="#cb78-329" aria-hidden="true" tabindex="-1"></a>intervals <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">^</span> <span class="dv">4</span></span>
<span id="cb78-330"><a href="#cb78-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-331"><a href="#cb78-331" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-332"><a href="#cb78-332" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-333"><a href="#cb78-333" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">200</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-334"><a href="#cb78-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-335"><a href="#cb78-335" aria-hidden="true" tabindex="-1"></a>sn.wv<span class="sc">@</span>left <span class="ot">&lt;-</span> sn.wv<span class="sc">@</span>left <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb78-336"><a href="#cb78-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-337"><a href="#cb78-337" aria-hidden="true" tabindex="-1"></a>quant <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">cut</span>(sn.wv<span class="sc">@</span>left, <span class="at">breaks =</span> intervals)) <span class="sc">-</span> (<span class="dv">1</span>  <span class="sc">+</span> (intervals <span class="sc">/</span> <span class="dv">2</span>))</span>
<span id="cb78-338"><a href="#cb78-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-339"><a href="#cb78-339" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals ) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-340"><a href="#cb78-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-341"><a href="#cb78-341" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> quant, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-342"><a href="#cb78-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-343"><a href="#cb78-343" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span>intervals, <span class="at">ytop=</span> intervals, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-344"><a href="#cb78-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-345"><a href="#cb78-345" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-346"><a href="#cb78-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-347"><a href="#cb78-347" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-348"><a href="#cb78-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-349"><a href="#cb78-349" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">unique</span>(quant), <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-350"><a href="#cb78-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-351"><a href="#cb78-351" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> quant[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-352"><a href="#cb78-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-353"><a href="#cb78-353" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-354"><a href="#cb78-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-355"><a href="#cb78-355" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-356"><a href="#cb78-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-357"><a href="#cb78-357" aria-hidden="true" tabindex="-1"></a>.. and 8 bits (2\^8 = 256 intervals):</span>
<span id="cb78-358"><a href="#cb78-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-359"><a href="#cb78-359" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, out.width="100%", fig.height= 3, warning=FALSE, message=FALSE}</span></span>
<span id="cb78-360"><a href="#cb78-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-361"><a href="#cb78-361" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb78-362"><a href="#cb78-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-363"><a href="#cb78-363" aria-hidden="true" tabindex="-1"></a>intervals <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">^</span> <span class="dv">8</span></span>
<span id="cb78-364"><a href="#cb78-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-365"><a href="#cb78-365" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">bg =</span> <span class="st">"#daeace"</span>)</span>
<span id="cb78-366"><a href="#cb78-366" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-367"><a href="#cb78-367" aria-hidden="true" tabindex="-1"></a>sn.wv <span class="ot">&lt;-</span> tuneR<span class="sc">::</span><span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">200</span>, <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-368"><a href="#cb78-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-369"><a href="#cb78-369" aria-hidden="true" tabindex="-1"></a>sn.wv<span class="sc">@</span>left <span class="ot">&lt;-</span> sn.wv<span class="sc">@</span>left <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb78-370"><a href="#cb78-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-371"><a href="#cb78-371" aria-hidden="true" tabindex="-1"></a>quant <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">cut</span>(sn.wv<span class="sc">@</span>left, <span class="at">breaks =</span> intervals)) <span class="sc">-</span> (<span class="dv">1</span>  <span class="sc">+</span> (intervals <span class="sc">/</span> <span class="dv">2</span>))</span>
<span id="cb78-372"><a href="#cb78-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-373"><a href="#cb78-373" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> sn.wv<span class="sc">@</span>left, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals ) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-374"><a href="#cb78-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-375"><a href="#cb78-375" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv)), <span class="at">y =</span> quant, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">yaxt=</span><span class="st">'n'</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span> <span class="sc">*</span> (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>, (intervals <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>), <span class="at">lwd =</span> lwd, <span class="at">col =</span> col, <span class="at">xlab =</span> <span class="st">"Time (s)"</span>, <span class="at">ylab =</span> <span class="st">"Amplitude"</span>, <span class="at">xaxs=</span><span class="st">'i'</span>)</span>
<span id="cb78-376"><a href="#cb78-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-377"><a href="#cb78-377" aria-hidden="true" tabindex="-1"></a><span class="fu">rect</span>(<span class="at">xleft=</span><span class="dv">0</span>, <span class="at">xright=</span> <span class="fu">duration</span>(sn.wv)<span class="sc">/</span> <span class="dv">2</span>, <span class="at">ybottom=</span><span class="sc">-</span>intervals, <span class="at">ytop=</span> intervals, <span class="at">col =</span> <span class="fu">adjustcolor</span>(<span class="st">"gray"</span>, <span class="at">alpha.f =</span> <span class="fl">0.3</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb78-378"><a href="#cb78-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-379"><a href="#cb78-379" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-380"><a href="#cb78-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-381"><a href="#cb78-381" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-382"><a href="#cb78-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-383"><a href="#cb78-383" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">unique</span>(quant), <span class="at">lwd =</span> <span class="fl">0.5</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb78-384"><a href="#cb78-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-385"><a href="#cb78-385" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="at">y =</span> quant[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">duration</span>(sn.wv), <span class="at">length.out =</span> <span class="fu">length</span>(sn.wv))[<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">length</span>(sn.wv), <span class="dv">10</span>)], <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb78-386"><a href="#cb78-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-387"><a href="#cb78-387" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-388"><a href="#cb78-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-389"><a href="#cb78-389" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-390"><a href="#cb78-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-391"><a href="#cb78-391" aria-hidden="true" tabindex="-1"></a>At this point quantization involves very little information loss. 16 bits is probably the most common dynamic range used nowadays. As you can imagine, the high number of intervals (2\^16 = 65536) allows for great precision in the quantization of amplitude.</span>
<span id="cb78-392"><a href="#cb78-392" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb78-393"><a href="#cb78-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-394"><a href="#cb78-394" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-395"><a href="#cb78-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-396"><a href="#cb78-396" aria-hidden="true" tabindex="-1"></a><span class="fu"># Sound in R</span></span>
<span id="cb78-397"><a href="#cb78-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-398"><a href="#cb78-398" aria-hidden="true" tabindex="-1"></a>Sound waves can be represented by 3 kinds of R objects:</span>
<span id="cb78-399"><a href="#cb78-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-400"><a href="#cb78-400" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Common classes (numerical vector, numerical matrix)</span>
<span id="cb78-401"><a href="#cb78-401" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Time series classes (ts, mts)</span>
<span id="cb78-402"><a href="#cb78-402" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Specific sound classes (Wave, sound and audioSample)</span>
<span id="cb78-403"><a href="#cb78-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-404"><a href="#cb78-404" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-405"><a href="#cb78-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-406"><a href="#cb78-406" aria-hidden="true" tabindex="-1"></a><span class="fu">## Non-specific classes</span></span>
<span id="cb78-407"><a href="#cb78-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-408"><a href="#cb78-408" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vectors</span></span>
<span id="cb78-409"><a href="#cb78-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-410"><a href="#cb78-410" aria-hidden="true" tabindex="-1"></a>Any numerical vector can be treated as a sound if a sampling frequency is provided. For example, a 440 Hz sinusoidal sound sampled at 8000 Hz for one second can be generated like this:</span>
<span id="cb78-411"><a href="#cb78-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-412"><a href="#cb78-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-413"><a href="#cb78-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-414"><a href="#cb78-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-415"><a href="#cb78-415" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(seewave)</span>
<span id="cb78-416"><a href="#cb78-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-417"><a href="#cb78-417" aria-hidden="true" tabindex="-1"></a><span class="co"># create sinewave at 440 Hz</span></span>
<span id="cb78-418"><a href="#cb78-418" aria-hidden="true" tabindex="-1"></a>s1 <span class="ot">&lt;-</span> <span class="fu">sin</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> <span class="dv">440</span> <span class="sc">*</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">8000</span>))</span>
<span id="cb78-419"><a href="#cb78-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-420"><a href="#cb78-420" aria-hidden="true" tabindex="-1"></a><span class="fu">is.vector</span>(s1)</span>
<span id="cb78-421"><a href="#cb78-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-422"><a href="#cb78-422" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(s1)</span>
<span id="cb78-423"><a href="#cb78-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-424"><a href="#cb78-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-425"><a href="#cb78-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-426"><a href="#cb78-426" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-427"><a href="#cb78-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-428"><a href="#cb78-428" aria-hidden="true" tabindex="-1"></a>These sequences of values only make sense when specifying the sampling rate at which they were created:</span>
<span id="cb78-429"><a href="#cb78-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-430"><a href="#cb78-430" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-431"><a href="#cb78-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-432"><a href="#cb78-432" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s1, <span class="at">f =</span> <span class="dv">8000</span>, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span>
<span id="cb78-433"><a href="#cb78-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-434"><a href="#cb78-434" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-435"><a href="#cb78-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-436"><a href="#cb78-436" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-437"><a href="#cb78-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-438"><a href="#cb78-438" aria-hidden="true" tabindex="-1"></a><span class="fu">### Matrices</span></span>
<span id="cb78-439"><a href="#cb78-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-440"><a href="#cb78-440" aria-hidden="true" tabindex="-1"></a>You can read any single column matrix:</span>
<span id="cb78-441"><a href="#cb78-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-442"><a href="#cb78-442" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-443"><a href="#cb78-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-444"><a href="#cb78-444" aria-hidden="true" tabindex="-1"></a>s2<span class="ot">&lt;-</span><span class="fu">as.matrix</span>(s1)</span>
<span id="cb78-445"><a href="#cb78-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-446"><a href="#cb78-446" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(s2)</span>
<span id="cb78-447"><a href="#cb78-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-448"><a href="#cb78-448" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(s2)</span>
<span id="cb78-449"><a href="#cb78-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-450"><a href="#cb78-450" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s2, <span class="at">f =</span> <span class="dv">8000</span>, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span>
<span id="cb78-451"><a href="#cb78-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-452"><a href="#cb78-452" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-453"><a href="#cb78-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-454"><a href="#cb78-454" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-455"><a href="#cb78-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-456"><a href="#cb78-456" aria-hidden="true" tabindex="-1"></a>If the matrix has more than one column, only the first column will be considered:</span>
<span id="cb78-457"><a href="#cb78-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-458"><a href="#cb78-458" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-459"><a href="#cb78-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-460"><a href="#cb78-460" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">rnorm</span>(<span class="dv">8000</span>)</span>
<span id="cb78-461"><a href="#cb78-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-462"><a href="#cb78-462" aria-hidden="true" tabindex="-1"></a>s3<span class="ot">&lt;-</span><span class="fu">cbind</span>(s2,x)</span>
<span id="cb78-463"><a href="#cb78-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-464"><a href="#cb78-464" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(s3)</span>
<span id="cb78-465"><a href="#cb78-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-466"><a href="#cb78-466" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(s3)</span>
<span id="cb78-467"><a href="#cb78-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-468"><a href="#cb78-468" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s3, <span class="at">f =</span> <span class="dv">8000</span>, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span>
<span id="cb78-469"><a href="#cb78-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-470"><a href="#cb78-470" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-471"><a href="#cb78-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-472"><a href="#cb78-472" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-473"><a href="#cb78-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-474"><a href="#cb78-474" aria-hidden="true" tabindex="-1"></a><span class="fu">### Time series</span></span>
<span id="cb78-475"><a href="#cb78-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-476"><a href="#cb78-476" aria-hidden="true" tabindex="-1"></a>The class <span class="in">`ts`</span> and related functions <span class="in">`ts()`</span>, <span class="in">`as.ts()`</span>, <span class="in">`is.ts()`</span> can also be used to generate sound objects in R. Here the command to similarly generate a series of time is shown corresponding to a 440 Hz sinusoidal sound sampled at 8000 Hz for one second:</span>
<span id="cb78-477"><a href="#cb78-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-478"><a href="#cb78-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-479"><a href="#cb78-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-480"><a href="#cb78-480" aria-hidden="true" tabindex="-1"></a>s4 <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> s1, <span class="at">start =</span> <span class="dv">0</span>, <span class="at">frequency =</span> <span class="dv">8000</span>)</span>
<span id="cb78-481"><a href="#cb78-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-482"><a href="#cb78-482" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s4)</span>
<span id="cb78-483"><a href="#cb78-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-484"><a href="#cb78-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-485"><a href="#cb78-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-486"><a href="#cb78-486" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-487"><a href="#cb78-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-488"><a href="#cb78-488" aria-hidden="true" tabindex="-1"></a>To generate a random noise of 0.5 seconds:</span>
<span id="cb78-489"><a href="#cb78-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-490"><a href="#cb78-490" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-491"><a href="#cb78-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-492"><a href="#cb78-492" aria-hidden="true" tabindex="-1"></a>s4 <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> <span class="fu">runif</span>(<span class="dv">4000</span>, <span class="at">min =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">max =</span> <span class="dv">1</span>), <span class="at">start =</span> <span class="dv">0</span>, <span class="at">end =</span> <span class="fl">0.5</span>, <span class="at">frequency =</span> <span class="dv">8000</span>)</span>
<span id="cb78-493"><a href="#cb78-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-494"><a href="#cb78-494" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s4)</span>
<span id="cb78-495"><a href="#cb78-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-496"><a href="#cb78-496" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-497"><a href="#cb78-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-498"><a href="#cb78-498" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-499"><a href="#cb78-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-500"><a href="#cb78-500" aria-hidden="true" tabindex="-1"></a>The <span class="in">`frequency()`</span> and <span class="in">`deltat()`</span> functions return the sampling frequency ($f$) and the time resolution ($Delta t$) respectively:</span>
<span id="cb78-501"><a href="#cb78-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-502"><a href="#cb78-502" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-503"><a href="#cb78-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-504"><a href="#cb78-504" aria-hidden="true" tabindex="-1"></a><span class="fu">frequency</span>(s4)</span>
<span id="cb78-505"><a href="#cb78-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-506"><a href="#cb78-506" aria-hidden="true" tabindex="-1"></a><span class="fu">deltat</span>(s4)</span>
<span id="cb78-507"><a href="#cb78-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-508"><a href="#cb78-508" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-509"><a href="#cb78-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-510"><a href="#cb78-510" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-511"><a href="#cb78-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-512"><a href="#cb78-512" aria-hidden="true" tabindex="-1"></a>As the frequency is incorporated into the <span class="in">`ts`</span> objects, it is not necessary to specify it when used within functions dedicated to audio:</span>
<span id="cb78-513"><a href="#cb78-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-514"><a href="#cb78-514" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-515"><a href="#cb78-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-516"><a href="#cb78-516" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s4, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span>
<span id="cb78-517"><a href="#cb78-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-518"><a href="#cb78-518" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-519"><a href="#cb78-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-520"><a href="#cb78-520" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-521"><a href="#cb78-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-522"><a href="#cb78-522" aria-hidden="true" tabindex="-1"></a>In the case of multiple time series, **seewave** functions will consider only the first series:</span>
<span id="cb78-523"><a href="#cb78-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-524"><a href="#cb78-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-525"><a href="#cb78-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-526"><a href="#cb78-526" aria-hidden="true" tabindex="-1"></a>s5 <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> s3, <span class="at">f =</span> <span class="dv">8000</span>)</span>
<span id="cb78-527"><a href="#cb78-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-528"><a href="#cb78-528" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(s5)</span>
<span id="cb78-529"><a href="#cb78-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-530"><a href="#cb78-530" aria-hidden="true" tabindex="-1"></a><span class="fu">oscillo</span>(s5, <span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">0.01</span>)</span>
<span id="cb78-531"><a href="#cb78-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-532"><a href="#cb78-532" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-533"><a href="#cb78-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-534"><a href="#cb78-534" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dedicated R classes for sound</span></span>
<span id="cb78-535"><a href="#cb78-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-536"><a href="#cb78-536" aria-hidden="true" tabindex="-1"></a>There are 3 kinds of objects corresponding to the <span class="in">`wav`</span> binary format or the<span class="in">`mp3`</span> compressed format:</span>
<span id="cb78-537"><a href="#cb78-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-538"><a href="#cb78-538" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Wave`</span> class of the package **tuneR**</span>
<span id="cb78-539"><a href="#cb78-539" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`sound`</span> class of the package **phonTools**</span>
<span id="cb78-540"><a href="#cb78-540" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`AudioSample`</span> class of the package **audio**</span>
<span id="cb78-541"><a href="#cb78-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-542"><a href="#cb78-542" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-543"><a href="#cb78-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-544"><a href="#cb78-544" aria-hidden="true" tabindex="-1"></a><span class="fu">### `Wave` class (**tuneR**)</span></span>
<span id="cb78-545"><a href="#cb78-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-546"><a href="#cb78-546" aria-hidden="true" tabindex="-1"></a>The <span class="in">`Wave`</span> class comes with the **tuneR** package. This S4 class includes different "slots" with the amplitude data (left or right channel), the sampling frequency (or frequency), the number of bits (8/16/24/32) and the type of sound (mono/stereo). High sampling rates (<span class="sc">\&gt;</span> 44100 Hz) can be read on these types of objects.</span>
<span id="cb78-547"><a href="#cb78-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-548"><a href="#cb78-548" aria-hidden="true" tabindex="-1"></a>The function to import <span class="in">`.wav`</span> files from the hard drive is <span class="in">`readWave`</span>:</span>
<span id="cb78-549"><a href="#cb78-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-550"><a href="#cb78-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-551"><a href="#cb78-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-552"><a href="#cb78-552" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb78-553"><a href="#cb78-553" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tuneR)</span>
<span id="cb78-554"><a href="#cb78-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-555"><a href="#cb78-555" aria-hidden="true" tabindex="-1"></a>s6 <span class="ot">&lt;-</span> <span class="fu">readWave</span>(<span class="st">"./examples/Phae.long1.wav"</span>)</span>
<span id="cb78-556"><a href="#cb78-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-557"><a href="#cb78-557" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-558"><a href="#cb78-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-559"><a href="#cb78-559" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-560"><a href="#cb78-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-561"><a href="#cb78-561" aria-hidden="true" tabindex="-1"></a>We can verify the class of the object like this:</span>
<span id="cb78-562"><a href="#cb78-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-563"><a href="#cb78-563" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE}</span></span>
<span id="cb78-564"><a href="#cb78-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-565"><a href="#cb78-565" aria-hidden="true" tabindex="-1"></a><span class="co"># object class</span></span>
<span id="cb78-566"><a href="#cb78-566" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(s6) </span>
<span id="cb78-567"><a href="#cb78-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-568"><a href="#cb78-568" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-569"><a href="#cb78-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-570"><a href="#cb78-570" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-571"><a href="#cb78-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-572"><a href="#cb78-572" aria-hidden="true" tabindex="-1"></a>S4 objects have a structure similar to lists but use '\@' to access each position (slot):</span>
<span id="cb78-573"><a href="#cb78-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-576"><a href="#cb78-576" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb78-577"><a href="#cb78-577" aria-hidden="true" tabindex="-1"></a><span class="co"># structure</span></span>
<span id="cb78-578"><a href="#cb78-578" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s6)</span>
<span id="cb78-579"><a href="#cb78-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-580"><a href="#cb78-580" aria-hidden="true" tabindex="-1"></a><span class="co"># extract 1 position</span></span>
<span id="cb78-581"><a href="#cb78-581" aria-hidden="true" tabindex="-1"></a>s6<span class="sc">@</span>samp.rate </span>
<span id="cb78-582"><a href="#cb78-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-583"><a href="#cb78-583" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-584"><a href="#cb78-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-585"><a href="#cb78-585" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-586"><a href="#cb78-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-587"><a href="#cb78-587" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-warning}</span>
<span id="cb78-588"><a href="#cb78-588" aria-hidden="true" tabindex="-1"></a>"Pulse-code modulation (PCM) is a method used to digitally represent sampled analog signals. It is the standard form of digital audio. In a PCM stream, the amplitude of the analog signal is sampled regularly at uniform intervals, and each sample is quantized to the nearest value within a range of digital steps" (<span class="co">[</span><span class="ot">Wikipedia</span><span class="co">](https://en.wikipedia.org/wiki/Pulse-code_modulation)</span>).</span>
<span id="cb78-589"><a href="#cb78-589" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb78-590"><a href="#cb78-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-591"><a href="#cb78-591" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-592"><a href="#cb78-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-593"><a href="#cb78-593" aria-hidden="true" tabindex="-1"></a>The samples come in the slot '@left':</span>
<span id="cb78-594"><a href="#cb78-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-597"><a href="#cb78-597" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb78-598"><a href="#cb78-598" aria-hidden="true" tabindex="-1"></a><span class="co"># samples</span></span>
<span id="cb78-599"><a href="#cb78-599" aria-hidden="true" tabindex="-1"></a>s6<span class="sc">@</span>left[<span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>]</span>
<span id="cb78-600"><a href="#cb78-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-601"><a href="#cb78-601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-602"><a href="#cb78-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-603"><a href="#cb78-603" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-604"><a href="#cb78-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-605"><a href="#cb78-605" aria-hidden="true" tabindex="-1"></a>The number of samples is given by the duration and the sampling rate.</span>
<span id="cb78-606"><a href="#cb78-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-607"><a href="#cb78-607" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-608"><a href="#cb78-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-609"><a href="#cb78-609" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-info}</span>
<span id="cb78-610"><a href="#cb78-610" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;font</span> <span class="er">size</span><span class="ot">=</span><span class="st">"5"</span><span class="kw">&gt;</span>Exercise<span class="kw">&lt;/font&gt;</span></span>
<span id="cb78-611"><a href="#cb78-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-612"><a href="#cb78-612" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>How can we calculate the duration of the <span class="in">`wave`</span> object using the information in the object?</span>
<span id="cb78-613"><a href="#cb78-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-614"><a href="#cb78-614" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-615"><a href="#cb78-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-616"><a href="#cb78-616" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Extract the first second of audio from the object <span class="in">`s6`</span> using indexing (and squared brackets)</span>
<span id="cb78-617"><a href="#cb78-617" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb78-618"><a href="#cb78-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-619"><a href="#cb78-619" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-620"><a href="#cb78-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-621"><a href="#cb78-621" aria-hidden="true" tabindex="-1"></a>An advantage of using <span class="in">`readWave()`</span> is the ability to read specific segments of sound files, especially useful with long files. This is done using the <span class="in">`from`</span> and<span class="in">`to`</span> arguments and specifying the units of time with the <span class="in">`units`</span> arguments. The units can be converted into "samples", "minutes" or "hours". For example, to read only the section that begins in 1s and ends in 2s of the file "Phae.long1.wav":</span>
<span id="cb78-622"><a href="#cb78-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-623"><a href="#cb78-623" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-624"><a href="#cb78-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-625"><a href="#cb78-625" aria-hidden="true" tabindex="-1"></a>s7 <span class="ot">&lt;-</span> <span class="fu">readWave</span>(<span class="st">"./examples/Phae.long1.wav"</span>, <span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">2</span>, <span class="at">units =</span> <span class="st">"seconds"</span>)</span>
<span id="cb78-626"><a href="#cb78-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-627"><a href="#cb78-627" aria-hidden="true" tabindex="-1"></a>s7</span>
<span id="cb78-628"><a href="#cb78-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-629"><a href="#cb78-629" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-630"><a href="#cb78-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-631"><a href="#cb78-631" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-632"><a href="#cb78-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-633"><a href="#cb78-633" aria-hidden="true" tabindex="-1"></a>The <span class="in">`.mp3`</span> files can be imported to R although they are imported in<span class="in">`Wave`</span> format. This is done using the <span class="in">`readMP3()`</span> function:</span>
<span id="cb78-634"><a href="#cb78-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-635"><a href="#cb78-635" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-636"><a href="#cb78-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-637"><a href="#cb78-637" aria-hidden="true" tabindex="-1"></a>s7 <span class="ot">&lt;-</span> <span class="fu">readMP3</span>(<span class="st">"./examples/Phae.long1.mp3"</span>)</span>
<span id="cb78-638"><a href="#cb78-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-639"><a href="#cb78-639" aria-hidden="true" tabindex="-1"></a>s7</span>
<span id="cb78-640"><a href="#cb78-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-641"><a href="#cb78-641" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-642"><a href="#cb78-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-643"><a href="#cb78-643" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-644"><a href="#cb78-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-645"><a href="#cb78-645" aria-hidden="true" tabindex="-1"></a>To obtain information about the object (sampling frequency, number of bits, mono/stereo), it is necessary to use the indexing of S4 class objects:</span>
<span id="cb78-646"><a href="#cb78-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-647"><a href="#cb78-647" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-648"><a href="#cb78-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-649"><a href="#cb78-649" aria-hidden="true" tabindex="-1"></a>s7<span class="sc">@</span>samp.rate</span>
<span id="cb78-650"><a href="#cb78-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-651"><a href="#cb78-651" aria-hidden="true" tabindex="-1"></a>s7<span class="sc">@</span>bit</span>
<span id="cb78-652"><a href="#cb78-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-653"><a href="#cb78-653" aria-hidden="true" tabindex="-1"></a>s7<span class="sc">@</span>stereo</span>
<span id="cb78-654"><a href="#cb78-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-655"><a href="#cb78-655" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-656"><a href="#cb78-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-657"><a href="#cb78-657" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-658"><a href="#cb78-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-659"><a href="#cb78-659" aria-hidden="true" tabindex="-1"></a>A property that does not appear in these calls is that <span class="in">`readWave`</span> does not normalize the sound. The values that describe the sound will be included between $\pm2^{bit} - 1$:</span>
<span id="cb78-660"><a href="#cb78-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-661"><a href="#cb78-661" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-662"><a href="#cb78-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-663"><a href="#cb78-663" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(s7<span class="sc">@</span>left)</span>
<span id="cb78-664"><a href="#cb78-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-665"><a href="#cb78-665" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-666"><a href="#cb78-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-667"><a href="#cb78-667" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-668"><a href="#cb78-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-669"><a href="#cb78-669" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-info}</span>
<span id="cb78-670"><a href="#cb78-670" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;font</span> <span class="er">size</span><span class="ot">=</span><span class="st">"5"</span><span class="kw">&gt;</span>Exercise<span class="kw">&lt;/font&gt;</span></span>
<span id="cb78-671"><a href="#cb78-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-672"><a href="#cb78-672" aria-hidden="true" tabindex="-1"></a>The function <span class="in">`Wave`</span> can be used to create wave objects.</span>
<span id="cb78-673"><a href="#cb78-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-674"><a href="#cb78-674" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-675"><a href="#cb78-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-676"><a href="#cb78-676" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Run the example code in the function documentation</span>
<span id="cb78-677"><a href="#cb78-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-678"><a href="#cb78-678" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Plot the oscillogram for the first 0.01 s of 'Wobj'</span>
<span id="cb78-679"><a href="#cb78-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-680"><a href="#cb78-680" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Note that the function <span class="in">`sine`</span> provides a shortcut that can be used to create wave object with a sine wave. Check out other similar functions described in the <span class="in">`sine`</span> function documentation. Try 4 of these alternative functions and plot the oscillogram of the first 0.01 s for each of them.</span>
<span id="cb78-681"><a href="#cb78-681" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb78-682"><a href="#cb78-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-683"><a href="#cb78-683" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-684"><a href="#cb78-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-685"><a href="#cb78-685" aria-hidden="true" tabindex="-1"></a>The function <span class="in">`read_sound_files`</span> from warbleR is a wrapper over several sound file reading functions, that can read files in 'wav', 'mp3', 'flac' and 'wac' format:</span>
<span id="cb78-686"><a href="#cb78-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-687"><a href="#cb78-687" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-688"><a href="#cb78-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-689"><a href="#cb78-689" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(warbleR)</span>
<span id="cb78-690"><a href="#cb78-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-691"><a href="#cb78-691" aria-hidden="true" tabindex="-1"></a><span class="co"># wave</span></span>
<span id="cb78-692"><a href="#cb78-692" aria-hidden="true" tabindex="-1"></a>rsf1 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"Phaethornis-eurynome-15607.wav"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb78-693"><a href="#cb78-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-694"><a href="#cb78-694" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf1)</span>
<span id="cb78-695"><a href="#cb78-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-696"><a href="#cb78-696" aria-hidden="true" tabindex="-1"></a><span class="co"># mp3</span></span>
<span id="cb78-697"><a href="#cb78-697" aria-hidden="true" tabindex="-1"></a>rsf2 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"Phaethornis-striigularis-154074.mp3"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb78-698"><a href="#cb78-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-699"><a href="#cb78-699" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf2)</span>
<span id="cb78-700"><a href="#cb78-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-701"><a href="#cb78-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-702"><a href="#cb78-702" aria-hidden="true" tabindex="-1"></a><span class="co"># flac</span></span>
<span id="cb78-703"><a href="#cb78-703" aria-hidden="true" tabindex="-1"></a>rsf3 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"Phae.long1.flac"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb78-704"><a href="#cb78-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-705"><a href="#cb78-705" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf3)</span>
<span id="cb78-706"><a href="#cb78-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-707"><a href="#cb78-707" aria-hidden="true" tabindex="-1"></a><span class="co"># wac</span></span>
<span id="cb78-708"><a href="#cb78-708" aria-hidden="true" tabindex="-1"></a>rsf4 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="st">"recording_20170716_230503.wac"</span>, <span class="at">path =</span> <span class="st">"./examples"</span>)</span>
<span id="cb78-709"><a href="#cb78-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-710"><a href="#cb78-710" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf4)</span>
<span id="cb78-711"><a href="#cb78-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-712"><a href="#cb78-712" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-713"><a href="#cb78-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-714"><a href="#cb78-714" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-715"><a href="#cb78-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-716"><a href="#cb78-716" aria-hidden="true" tabindex="-1"></a>The function can also read recordings hosted in an online repository:</span>
<span id="cb78-717"><a href="#cb78-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-720"><a href="#cb78-720" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb78-721"><a href="#cb78-721" aria-hidden="true" tabindex="-1"></a>rsf5 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="at">X =</span> <span class="st">"https://xeno-canto.org/35340/download"</span>)</span>
<span id="cb78-722"><a href="#cb78-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-723"><a href="#cb78-723" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf5)</span>
<span id="cb78-724"><a href="#cb78-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-725"><a href="#cb78-725" aria-hidden="true" tabindex="-1"></a>rsf6 <span class="ot">&lt;-</span> <span class="fu">read_sound_file</span>(<span class="at">X =</span> <span class="st">"https://github.com/maRce10/OTS_BIR_2023/raw/master/examples/Phae.long1.flac"</span>)</span>
<span id="cb78-726"><a href="#cb78-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-727"><a href="#cb78-727" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(rsf6)</span>
<span id="cb78-728"><a href="#cb78-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-729"><a href="#cb78-729" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-730"><a href="#cb78-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-731"><a href="#cb78-731" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-732"><a href="#cb78-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-733"><a href="#cb78-733" aria-hidden="true" tabindex="-1"></a><span class="fu">## Class `sound` (**phonTools**)</span></span>
<span id="cb78-734"><a href="#cb78-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-735"><a href="#cb78-735" aria-hidden="true" tabindex="-1"></a>The <span class="in">`loadsound()`</span> function of *phonTools* also imports 'wave' sound files into R, in this case as objects of class <span class="in">`sound`</span>:</span>
<span id="cb78-736"><a href="#cb78-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-737"><a href="#cb78-737" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-738"><a href="#cb78-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-739"><a href="#cb78-739" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(phonTools)</span>
<span id="cb78-740"><a href="#cb78-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-741"><a href="#cb78-741" aria-hidden="true" tabindex="-1"></a>s8 <span class="ot">&lt;-</span> <span class="fu">loadsound</span>(<span class="st">"./examples/Phae.long1.wav"</span>)</span>
<span id="cb78-742"><a href="#cb78-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-743"><a href="#cb78-743" aria-hidden="true" tabindex="-1"></a>s8</span>
<span id="cb78-744"><a href="#cb78-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-745"><a href="#cb78-745" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s8)</span>
<span id="cb78-746"><a href="#cb78-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-747"><a href="#cb78-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-748"><a href="#cb78-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-749"><a href="#cb78-749" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-750"><a href="#cb78-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-751"><a href="#cb78-751" aria-hidden="true" tabindex="-1"></a>This function only imports files with a dynamic range of 8 or 16 bits.</span>
<span id="cb78-752"><a href="#cb78-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-753"><a href="#cb78-753" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-754"><a href="#cb78-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-755"><a href="#cb78-755" aria-hidden="true" tabindex="-1"></a><span class="fu">## Class `audioSample` (**audio**)</span></span>
<span id="cb78-756"><a href="#cb78-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-757"><a href="#cb78-757" aria-hidden="true" tabindex="-1"></a>The **audio** package is another option to handle <span class="in">`.wav`</span> files. The sound can be imported using the <span class="in">`load.wave()`</span> function. The class of the resulting object is <span class="in">`audioSample`</span> which is essentially a numerical vector (for mono) or a numerical matrix with two rows (for stereo). The sampling frequency and resolution are saved as attributes:</span>
<span id="cb78-758"><a href="#cb78-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-759"><a href="#cb78-759" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-760"><a href="#cb78-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-761"><a href="#cb78-761" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(audio)</span>
<span id="cb78-762"><a href="#cb78-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-763"><a href="#cb78-763" aria-hidden="true" tabindex="-1"></a>s10 <span class="ot">&lt;-</span> <span class="fu">load.wave</span>(<span class="st">"./examples/Phae.long1.wav"</span>)</span>
<span id="cb78-764"><a href="#cb78-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-765"><a href="#cb78-765" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(s10)</span>
<span id="cb78-766"><a href="#cb78-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-767"><a href="#cb78-767" aria-hidden="true" tabindex="-1"></a>s10<span class="sc">$</span>rate</span>
<span id="cb78-768"><a href="#cb78-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-769"><a href="#cb78-769" aria-hidden="true" tabindex="-1"></a>s10<span class="sc">$</span>bits</span>
<span id="cb78-770"><a href="#cb78-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-771"><a href="#cb78-771" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-772"><a href="#cb78-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-773"><a href="#cb78-773" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-774"><a href="#cb78-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-775"><a href="#cb78-775" aria-hidden="true" tabindex="-1"></a>The main advantage of the **audio** package is that the sound can be acquired directly within an R session. This is achieved first by preparing a <span class="in">`NAs`</span> vector and then using the<span class="in">`record()`</span> function. For example, to obtain a mono sound of 5 seconds sampled at 16 kHz:</span>
<span id="cb78-776"><a href="#cb78-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-777"><a href="#cb78-777" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb78-778"><a href="#cb78-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-779"><a href="#cb78-779" aria-hidden="true" tabindex="-1"></a>s11 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA_real_</span>, <span class="dv">16000</span><span class="sc">*</span><span class="dv">5</span>)</span>
<span id="cb78-780"><a href="#cb78-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-781"><a href="#cb78-781" aria-hidden="true" tabindex="-1"></a><span class="fu">record</span>(s11, <span class="dv">16000</span>, <span class="dv">1</span>)</span>
<span id="cb78-782"><a href="#cb78-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-783"><a href="#cb78-783" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-784"><a href="#cb78-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-785"><a href="#cb78-785" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-786"><a href="#cb78-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-787"><a href="#cb78-787" aria-hidden="true" tabindex="-1"></a>A recording session can be controlled by three complementary functions: <span class="in">`pause()`</span>, <span class="in">`rewind()`</span>, and <span class="in">`resume()`</span>.</span>
<span id="cb78-788"><a href="#cb78-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-789"><a href="#cb78-789" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-790"><a href="#cb78-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-791"><a href="#cb78-791" aria-hidden="true" tabindex="-1"></a><span class="fu">## Export sounds from R</span></span>
<span id="cb78-792"><a href="#cb78-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-793"><a href="#cb78-793" aria-hidden="true" tabindex="-1"></a>For maximum compatibility with other sound programs, it may be useful to save a sound as a simple <span class="in">`.txt`</span> file. The following commands will write a "tico.txt" file:</span>
<span id="cb78-794"><a href="#cb78-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-795"><a href="#cb78-795" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = TRUE}</span></span>
<span id="cb78-796"><a href="#cb78-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-797"><a href="#cb78-797" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(tico)</span>
<span id="cb78-798"><a href="#cb78-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-799"><a href="#cb78-799" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(tico, <span class="at">f=</span><span class="dv">22050</span>)</span>
<span id="cb78-800"><a href="#cb78-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-801"><a href="#cb78-801" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-802"><a href="#cb78-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-803"><a href="#cb78-803" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-804"><a href="#cb78-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-805"><a href="#cb78-805" aria-hidden="true" tabindex="-1"></a><span class="fu">## Format '.wav'</span></span>
<span id="cb78-806"><a href="#cb78-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-807"><a href="#cb78-807" aria-hidden="true" tabindex="-1"></a>**tuneR** and **audio** have a function to write `.wav` files: `writeWave()` and `save.wave()` respectively. Within **seewave**, the <span class="in">`savewav()`</span> function, which is based on <span class="in">`writeWave()`</span>, can be used to save data in <span class="in">`.wav`</span> format. By default, the object name will be used for the name of the <span class="in">`.wav`</span> file:</span>
<span id="cb78-808"><a href="#cb78-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-809"><a href="#cb78-809" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb78-810"><a href="#cb78-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-811"><a href="#cb78-811" aria-hidden="true" tabindex="-1"></a><span class="fu">savewav</span>(tico)</span>
<span id="cb78-812"><a href="#cb78-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-813"><a href="#cb78-813" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-814"><a href="#cb78-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-815"><a href="#cb78-815" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-816"><a href="#cb78-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-817"><a href="#cb78-817" aria-hidden="true" tabindex="-1"></a><span class="fu">## Format '.flac'</span></span>
<span id="cb78-818"><a href="#cb78-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-819"><a href="#cb78-819" aria-hidden="true" tabindex="-1"></a>Free Lossless Audio Codec (FLAC) is a file format for lossless audio data compression. FLAC reduces bandwidth and storage requirements without sacrificing the integrity of the audio source. Audio sources encoded in FLAC are generally reduced in size from 40 to 50 percent. See the flac website for more details (<span class="co">[</span><span class="ot">flac.sourceforge.net</span><span class="co">](http://flac.sourceforge.net)</span>).</span>
<span id="cb78-820"><a href="#cb78-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-821"><a href="#cb78-821" aria-hidden="true" tabindex="-1"></a>The <span class="in">`.flac`</span> format cannot be used as such with R. However, the <span class="in">`wav2flac()`</span>function allows you to call the FLAC software directly from the console. Therefore, FLAC must be installed on your operating system. If you have a <span class="in">`.wav`</span> file that you want to compress in <span class="in">`.flac`</span>, call:</span>
<span id="cb78-822"><a href="#cb78-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-823"><a href="#cb78-823" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb78-824"><a href="#cb78-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-825"><a href="#cb78-825" aria-hidden="true" tabindex="-1"></a><span class="fu">wav2flac</span>(<span class="at">file =</span> <span class="st">"./examples/Phae.long1.wav"</span>, <span class="at">overwrite =</span> <span class="cn">FALSE</span>)</span>
<span id="cb78-826"><a href="#cb78-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-827"><a href="#cb78-827" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-828"><a href="#cb78-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-829"><a href="#cb78-829" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-830"><a href="#cb78-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-831"><a href="#cb78-831" aria-hidden="true" tabindex="-1"></a>To compress a <span class="in">`.wav`</span> file to a <span class="in">`.flac`</span> format, the argument <span class="in">`reverse = TRUE`</span> must be used:</span>
<span id="cb78-832"><a href="#cb78-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-833"><a href="#cb78-833" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb78-834"><a href="#cb78-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-835"><a href="#cb78-835" aria-hidden="true" tabindex="-1"></a><span class="fu">wav2flac</span>(<span class="st">"Phae.long1.flac"</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-836"><a href="#cb78-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-837"><a href="#cb78-837" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-838"><a href="#cb78-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-839"><a href="#cb78-839" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-840"><a href="#cb78-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-841"><a href="#cb78-841" aria-hidden="true" tabindex="-1"></a>This table, taken from Sueur (2018), summarizes the functions available to import and export sound files in R. The table is incomplete since it does not mention the functions of the <span class="in">`phonTools`</span> package:</span>
<span id="cb78-842"><a href="#cb78-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-843"><a href="#cb78-843" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"images/tabla-waves.png"</span> <span class="er">alt</span><span class="ot">=</span><span class="st">"tabla imp exp waves"</span> <span class="er">width</span><span class="ot">=</span><span class="st">"700"</span><span class="kw">/&gt;</span></span>
<span id="cb78-844"><a href="#cb78-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-845"><a href="#cb78-845" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb78-846"><a href="#cb78-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-847"><a href="#cb78-847" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-848"><a href="#cb78-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-849"><a href="#cb78-849" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-info}</span>
<span id="cb78-850"><a href="#cb78-850" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;font</span> <span class="er">size</span><span class="ot">=</span><span class="st">"5"</span><span class="kw">&gt;</span>Exercise<span class="kw">&lt;/font&gt;</span></span>
<span id="cb78-851"><a href="#cb78-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-852"><a href="#cb78-852" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>How does the sampling rate affect the size of an audio file? (hint: create 2 sounds files with the same data but different sampling rates; use <span class="in">`sine()`</span>)</span>
<span id="cb78-853"><a href="#cb78-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-854"><a href="#cb78-854" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>How does the dynamic range affect the size of an audio file?</span>
<span id="cb78-855"><a href="#cb78-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-856"><a href="#cb78-856" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Use the <span class="in">`system.time()`</span> function to compare the performance of the different functions to import audio files in R. For this use the file "LBH.374.SUR.wav" (Long-billed hermit songs) which lasts about 2 min</span>
<span id="cb78-857"><a href="#cb78-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-858"><a href="#cb78-858" aria-hidden="true" tabindex="-1"></a>The following code creates a plot similar to <span class="in">`oscillo`</span> but using dots instead of lines:</span>
<span id="cb78-859"><a href="#cb78-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-860"><a href="#cb78-860" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb78-861"><a href="#cb78-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-862"><a href="#cb78-862" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-863"><a href="#cb78-863" aria-hidden="true" tabindex="-1"></a>wav <span class="ot">&lt;-</span> <span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">500</span>, </span>
<span id="cb78-864"><a href="#cb78-864" aria-hidden="true" tabindex="-1"></a>            <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-865"><a href="#cb78-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-866"><a href="#cb78-866" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb78-867"><a href="#cb78-867" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(wav<span class="sc">@</span>left) </span>
<span id="cb78-868"><a href="#cb78-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-869"><a href="#cb78-869" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-870"><a href="#cb78-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-871"><a href="#cb78-871" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE}</span></span>
<span id="cb78-872"><a href="#cb78-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-873"><a href="#cb78-873" aria-hidden="true" tabindex="-1"></a><span class="co"># generate sine wave</span></span>
<span id="cb78-874"><a href="#cb78-874" aria-hidden="true" tabindex="-1"></a>wav <span class="ot">&lt;-</span> <span class="fu">sine</span>(<span class="at">freq =</span> <span class="dv">440</span>, <span class="at">duration =</span> <span class="dv">500</span>, </span>
<span id="cb78-875"><a href="#cb78-875" aria-hidden="true" tabindex="-1"></a>            <span class="at">xunit =</span> <span class="st">"samples"</span>, <span class="at">samp.rate =</span> <span class="dv">44100</span>)</span>
<span id="cb78-876"><a href="#cb78-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-877"><a href="#cb78-877" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">bg =</span> <span class="st">"#ccebf5"</span>, <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="sc">+</span> <span class="fl">0.1</span>)</span>
<span id="cb78-878"><a href="#cb78-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-879"><a href="#cb78-879" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb78-880"><a href="#cb78-880" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(wav<span class="sc">@</span>left) </span>
<span id="cb78-881"><a href="#cb78-881" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-882"><a href="#cb78-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-883"><a href="#cb78-883" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-884"><a href="#cb78-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-885"><a href="#cb78-885" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Use the function <span class="in">`downsample()`</span> to reduce the sampling rate of 'wav' (below 44100) and plot the output object. Decrease the sampling rate until you cannot recognize the wave pattern from the original wave object. Try several values so you get a sense at which sampling rate this happens.</span>
<span id="cb78-886"><a href="#cb78-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-887"><a href="#cb78-887" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval =  FALSE, echo = FALSE}</span></span>
<span id="cb78-888"><a href="#cb78-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-889"><a href="#cb78-889" aria-hidden="true" tabindex="-1"></a>down_wav <span class="ot">&lt;-</span> <span class="fu">downsample</span>(<span class="at">object =</span> wav, <span class="at">samp.rate =</span> <span class="dv">2756</span>)</span>
<span id="cb78-890"><a href="#cb78-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-891"><a href="#cb78-891" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb78-892"><a href="#cb78-892" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(down_wav<span class="sc">@</span>left) </span>
<span id="cb78-893"><a href="#cb78-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-894"><a href="#cb78-894" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-895"><a href="#cb78-895" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb78-896"><a href="#cb78-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-897"><a href="#cb78-897" aria-hidden="true" tabindex="-1"></a>&nbsp;</span>
<span id="cb78-898"><a href="#cb78-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-899"><a href="#cb78-899" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb78-900"><a href="#cb78-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-901"><a href="#cb78-901" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
<span id="cb78-902"><a href="#cb78-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-903"><a href="#cb78-903" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Sueur J, Aubin T, Simonis C. 2008. Equipment review: seewave, a free modular tool for sound analysis and synthesis. Bioacoustics 18(2):213--226.</span>
<span id="cb78-904"><a href="#cb78-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-905"><a href="#cb78-905" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Sueur, J. (2018). Sound Analysis and Synthesis with R.</span>
<span id="cb78-906"><a href="#cb78-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-907"><a href="#cb78-907" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Sueur J. (2018). I/O of sound with R. seewave package vignette. url: https://cran.r-project.org/web/packages/seewave/vignettes/seewave_IO.pdf</span>
<span id="cb78-908"><a href="#cb78-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-909"><a href="#cb78-909" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb78-910"><a href="#cb78-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-911"><a href="#cb78-911" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;font</span> <span class="er">size</span><span class="ot">=</span><span class="st">"4"</span><span class="kw">&gt;</span>Session information<span class="kw">&lt;/font&gt;</span></span>
<span id="cb78-912"><a href="#cb78-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-913"><a href="#cb78-913" aria-hidden="true" tabindex="-1"></a><span class="in">```{r session info, echo=F}</span></span>
<span id="cb78-914"><a href="#cb78-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-915"><a href="#cb78-915" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb78-916"><a href="#cb78-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-917"><a href="#cb78-917" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Copyright 2023 | <a href="https://marce10.github.io">Marcelo Araya-Salas</a></div>
  </div>
</footer>



</body></html>